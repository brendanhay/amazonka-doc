<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.AWS.S3.Encryption</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Network.AWS.S3.Encryption.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">amazonka-s3-encryption-1.4.5: Amazon Simple Storage Service SDK - Client-Side Encryption.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2013-2016 Brendan Hay</td></tr><tr><th>License</th><td>Mozilla Public License, v. 2.0.</td></tr><tr><th>Maintainer</th><td>Brendan Hay &lt;brendan.g.hay@gmail.com&gt;</td></tr><tr><th>Stability</th><td>provisional</td></tr><tr><th>Portability</th><td>non-portable (GHC extensions)</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Network.AWS.S3.Encryption</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Usage</a></li><li><a href="#g:2">Specifying Master Keys</a></li><li><a href="#g:3">Request Encryption/Decryption</a><ul><li><a href="#g:4">Instruction Files</a><ul><li><a href="#g:5">Default Instruction Extension</a></li></ul></li></ul></li><li><a href="#g:6">Handling Errors</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Addons for <a href="http://hackage.haskell.org/package/amazonka-s3">amazonka-s3</a> to
 support client-side encryption.</p><p>Your client-side master keys and your unencrypted data are never sent to AWS;
 therefore, it is important that you safely manage your encryption keys. If
 you lose them, you won't be able to decrypt your data.
 When generating a symmetric key, you should ensure
 that the key length is compatible with the underlying <code>AES256</code> cipher.</p><p>The encryption procedure is:</p><ul><li>A one-time-use symmetric key a.k.a. a data encryption key (or data key) and
 initialisation vector (IV) are generated locally. This data key and IV are used
 to encrypt the data of a single S3 object using an AES256 cipher in CBC mode,
 with PKCS5 padding. (For each object sent, a completely separate data key and IV are generated.)</li><li>The generated data encryption key used above is encrypted using a symmetric
 AES256 cipher in ECB mode, asymmetric RSA, or KMS facilities, depending on the
 client-side master key you provide.</li><li>The encrypted data is uploaded and the encrypted data key and material description
 are attached as object metadata (either headers or a separate instruction file).
 If KMS is used, the material description helps determine which client-side master
 key to later use for decryption, otherwise the configured client-side key at
 time of decryption is used.</li></ul><p>For decryption:</p><p>The encrypted object is downloaded from Amazon S3 along with any metadata.
 If KMS was used to encrypt the data then the master key id is taken from the
 metadata material description, otherwise the client-side master key in the
 current environment is used to decrypt the data key, which in turn is used
 to decrypt the object data.</p><p>The client-side master key you provide can be either a symmetric key, an
 asymmetric public/private key pair, or a KMS master key.</p><p>The stored metadata format is designed to be compatible with the official Java
 AWS SDK (both V1 and V2 envelopes), but only a limited set of the possible
 encryption options are supported. Therefore assuming defaults, objects stored
 with this library should be retrievable by any of the other official SDKs, and
 vice versa.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:KeyEnv">KeyEnv</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Key">Key</a></li><li class="src short"><a href="#v:kmsKey">kmsKey</a> :: Text -&gt; <a href="Network-AWS-S3-Encryption.html#t:Key">Key</a></li><li class="src short"><a href="#v:asymmetricKey">asymmetricKey</a> :: PrivateKey -&gt; <a href="Network-AWS-S3-Encryption.html#t:Key">Key</a></li><li class="src short"><a href="#v:symmetricKey">symmetricKey</a> :: MonadThrow m =&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; m <a href="Network-AWS-S3-Encryption.html#t:Key">Key</a></li><li class="src short"><a href="#v:newSecret">newSecret</a> :: (MonadThrow m, MonadRandom m) =&gt; m <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:master">master</a> :: (MonadReader r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; <a href="Network-AWS-S3-Encryption.html#t:Key">Key</a> -&gt; m a -&gt; m a</li><li class="src short"><a href="#v:material">material</a> :: (MonadReader r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; <a href="Network-AWS-S3-Encryption-Types.html#t:Description">Description</a> -&gt; m a -&gt; m a</li><li class="src short"><a href="#v:encrypt">encrypt</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; PutObject -&gt; m PutObjectResponse</li><li class="src short"><a href="#v:decrypt">decrypt</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; GetObject -&gt; m GetObjectResponse</li><li class="src short"><a href="#v:initiate">initiate</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; CreateMultipartUpload -&gt; m (CreateMultipartUploadResponse, UploadPart -&gt; <a href="Network-AWS-S3-Encryption-Encrypt.html#t:Encrypted">Encrypted</a> UploadPart)</li><li class="src short"><a href="#v:encryptInstructions">encryptInstructions</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; PutObject -&gt; m PutObjectResponse</li><li class="src short"><a href="#v:decryptInstructions">decryptInstructions</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; GetObject -&gt; m GetObjectResponse</li><li class="src short"><a href="#v:initiateInstructions">initiateInstructions</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; CreateMultipartUpload -&gt; m (CreateMultipartUploadResponse, UploadPart -&gt; <a href="Network-AWS-S3-Encryption-Encrypt.html#t:Encrypted">Encrypted</a> UploadPart)</li><li class="src short"><a href="#v:cleanupInstructions">cleanupInstructions</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Instructions.html#t:RemoveInstructions">RemoveInstructions</a> a) =&gt; a -&gt; m (Rs a)</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Ext">Ext</a> = <a href="#v:Ext">Ext</a> Text</li><li class="src short"><a href="#v:defaultExtension">defaultExtension</a> :: <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:EncryptionError">EncryptionError</a><ul class="subs"><li>= <a href="#v:CipherFailure">CipherFailure</a> CryptoError</li><li>| <a href="#v:PubKeyFailure">PubKeyFailure</a> Error</li><li>| <a href="#v:IVInvalid">IVInvalid</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li>| <a href="#v:EnvelopeMissing">EnvelopeMissing</a> (CI Text)</li><li>| <a href="#v:EnvelopeInvalid">EnvelopeInvalid</a> (CI Text) <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></li><li>| <a href="#v:PlaintextUnavailable">PlaintextUnavailable</a></li></ul></li><li class="src short"><span class="keyword">class</span> <a href="#t:AsEncryptionError">AsEncryptionError</a> r <span class="keyword">where</span><ul class="subs"></ul></li></ul></div><div id="interface"><h1 id="g:1">Usage</h1><div class="doc"><p>When sending requests that make use of a master key, an extension to the underlying
<code>AWS</code> environment is required. You can specify this environment as follows:</p><pre>import Network.AWS
import Network.AWS.S3
import Network.AWS.S3.Encryption
import System.IO

example :: Key -&gt; IO GetObjectResponse
example k = do
    -- A standard AWS environment with credentials is created using <code>newEnv</code>:
    e &lt;- newEnv Frankfurt Discover

    -- The environment needed for encryption is then extended using a <code><a href="Network-AWS-S3-Encryption.html#t:Key">Key</a></code>:
    runAWS (KeyEnv e (kmsKey &quot;alias/master-key&quot;)) $ do
        -- To store an encrypted object, <code><a href="Network-AWS-S3-Encryption.html#v:encrypt">encrypt</a></code> is used inplace of where you would
        -- typically use <code>send</code>:
        _  &lt;- encrypt (putObject &quot;bucket-name&quot; &quot;object-key&quot; body)

        -- To retrieve a previously encrypted object, <code><a href="Network-AWS-S3-Encryption.html#v:decrypt">decrypt</a></code> is used, again similarly to
        -- how you'd use <code>send</code>:
        rs &lt;- decrypt (getObject &quot;bucket-name&quot; &quot;object-key&quot;)

        -- The <code>GetObjectResponse</code> here contains a <code>gorsBody</code> that is decrypted during read:
        return rs
</pre></div><h1 id="g:2">Specifying Master Keys</h1><div class="doc"><p>You master key should be stored and secured by you alone (or KMS). The specific
key that is used to encrypt an object is required to decrypt the same object.
If you lose this key, you will not be able to decrypt the related objects.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:KeyEnv" class="def">KeyEnv</a> <a href="src/Network.AWS.S3.Encryption.Types.html#KeyEnv" class="link">Source</a> <a href="#t:KeyEnv" class="selflink">#</a></p><div class="doc"><p>An <code>AWS</code> environment composed with the master key used to encrypt/decrypt
 requests. This environment is used in place of <code><a href="AWST.html#v:Env">Env</a></code> when
 running AWS actions.</p></div><div class="subs instances"><p id="control.i:KeyEnv" class="caption collapser" onclick="toggleSection('i:KeyEnv')">Instances</p><div id="section.i:KeyEnv" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:KeyEnv:HasEnv:1" class="instance expander" onclick="toggleSection('i:id:KeyEnv:HasEnv:1')"></span> HasEnv <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-141" class="link">Source</a> <a href="#t:KeyEnv" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:KeyEnv:HasEnv:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:environment">environment</a> :: Lens' <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> Env</p><p class="src"><a href="#v:envRegion">envRegion</a> :: Lens' <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> Region</p><p class="src"><a href="#v:envLogger">envLogger</a> :: Lens' <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> Logger</p><p class="src"><a href="#v:envRetryCheck">envRetryCheck</a> :: Lens' <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> (<a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a> -&gt; HttpException -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>)</p><p class="src"><a href="#v:envOverride">envOverride</a> :: Lens' <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> (<a href="../base-4.10.0.0/Data-Monoid.html#t:Dual">Dual</a> (<a href="../base-4.10.0.0/Data-Monoid.html#t:Endo">Endo</a> Service))</p><p class="src"><a href="#v:envManager">envManager</a> :: Lens' <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> Manager</p><p class="src"><a href="#v:envAuth">envAuth</a> :: Lens' <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> Auth</p><p class="src"><a href="#v:envEC2">envEC2</a> :: Getter <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> (<a href="../base-4.10.0.0/Data-IORef.html#t:IORef">IORef</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>))</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:KeyEnv:HasKeyEnv:2" class="instance expander" onclick="toggleSection('i:id:KeyEnv:HasKeyEnv:2')"></span> <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-151" class="link">Source</a> <a href="#t:KeyEnv" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:KeyEnv:HasKeyEnv:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:keyed">keyed</a> :: Lens' <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> <a href="src/Network.AWS.S3.Encryption.Types.html#keyed" class="link">Source</a> <a href="#v:keyed" class="selflink">#</a></p><p class="src"><a href="#v:envKey">envKey</a> :: Lens' <a href="Network-AWS-S3-Encryption.html#t:KeyEnv">KeyEnv</a> <a href="Network-AWS-S3-Encryption.html#t:Key">Key</a> <a href="src/Network.AWS.S3.Encryption.Types.html#envKey" class="link">Source</a> <a href="#v:envKey" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Key" class="def">Key</a> <a href="src/Network.AWS.S3.Encryption.Types.html#Key" class="link">Source</a> <a href="#t:Key" class="selflink">#</a></p><div class="doc"><p>Master key used for encryption and decryption.</p></div></div><div class="top"><p class="src"><a id="v:kmsKey" class="def">kmsKey</a> :: Text -&gt; <a href="Network-AWS-S3-Encryption.html#t:Key">Key</a> <a href="src/Network.AWS.S3.Encryption.html#kmsKey" class="link">Source</a> <a href="#v:kmsKey" class="selflink">#</a></p><div class="doc"><p>Specify a KMS master key to use, with an initially empty material description.</p><p><em>See:</em> <code><a href="Network-AWS-S3-Encryption-Types.html#v:description">description</a></code>, <code><a href="Network-AWS-S3-Encryption.html#v:material">material</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:asymmetricKey" class="def">asymmetricKey</a> :: PrivateKey -&gt; <a href="Network-AWS-S3-Encryption.html#t:Key">Key</a> <a href="src/Network.AWS.S3.Encryption.html#asymmetricKey" class="link">Source</a> <a href="#v:asymmetricKey" class="selflink">#</a></p><div class="doc"><p>Specify the asymmetric key used for RSA encryption.</p><p><em>See:</em> <code><a href="Network-AWS-S3-Encryption-Types.html#v:description">description</a></code>, <code><a href="Network-AWS-S3-Encryption.html#v:material">material</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:symmetricKey" class="def">symmetricKey</a> :: MonadThrow m =&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; m <a href="Network-AWS-S3-Encryption.html#t:Key">Key</a> <a href="src/Network.AWS.S3.Encryption.html#symmetricKey" class="link">Source</a> <a href="#v:symmetricKey" class="selflink">#</a></p><div class="doc"><p>Specify the shared secret to use for symmetric key encryption.
 This must be compatible with the AES256 key size, 32 bytes.</p><p>Throws <code><a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></code>, specifically <code><a href="Network-AWS-S3-Encryption.html#v:CipherFailure">CipherFailure</a></code>.</p><p><em>See:</em> <code><a href="Network-AWS-S3-Encryption.html#v:newSecret">newSecret</a></code>, <code><a href="Network-AWS-S3-Encryption-Types.html#v:description">description</a></code>, <code><a href="Network-AWS-S3-Encryption.html#v:material">material</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:newSecret" class="def">newSecret</a> :: (MonadThrow m, MonadRandom m) =&gt; m <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.AWS.S3.Encryption.html#newSecret" class="link">Source</a> <a href="#v:newSecret" class="selflink">#</a></p><div class="doc"><p>Generate a random shared secret that is of the correct length to use with
 <code><a href="Network-AWS-S3-Encryption.html#v:symmetricKey">symmetricKey</a></code>. This will need to be stored securely to enable decryption
 of any requests that are encrypted using this secret.</p></div></div><div class="top"><p class="src"><a id="v:master" class="def">master</a> :: (MonadReader r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; <a href="Network-AWS-S3-Encryption.html#t:Key">Key</a> -&gt; m a -&gt; m a <a href="src/Network.AWS.S3.Encryption.html#master" class="link">Source</a> <a href="#v:master" class="selflink">#</a></p><div class="doc"><p>Set (using <code>local</code>) the client-side master key used to encrypt/decrypt
 a block of actions.</p></div></div><div class="top"><p class="src"><a id="v:material" class="def">material</a> :: (MonadReader r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; <a href="Network-AWS-S3-Encryption-Types.html#t:Description">Description</a> -&gt; m a -&gt; m a <a href="src/Network.AWS.S3.Encryption.html#material" class="link">Source</a> <a href="#v:material" class="selflink">#</a></p><div class="doc"><p>Set (using <code>local</code>) any additional material description to be used.</p><p>For encryption, this provides audit and logging information and is logged
 by CloudTrail, if enabled.</p><p>For decryption when using KMS, this is merged with whatever material description
 is stored on the envelope and supplied to KMS as a decryption context.</p></div></div><h1 id="g:3">Request Encryption/Decryption</h1><div class="doc"><p>Only a small number of S3 operations actually utilise encryption/decryption
behaviour, namely <code>PutObject</code>, <code>GetObject</code>, and the related multipart upload
operations. The following functions store the encryption envelope in object
metadata (headers).</p></div><div class="top"><p class="src"><a id="v:encrypt" class="def">encrypt</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; PutObject -&gt; m PutObjectResponse <a href="src/Network.AWS.S3.Encryption.html#encrypt" class="link">Source</a> <a href="#v:encrypt" class="selflink">#</a></p><div class="doc"><p>Encrypt an object, storing the encryption envelope in <code>x-amz-meta-*</code>
 headers.</p><p>Throws <code><a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></code>, <code>Error</code>.</p></div></div><div class="top"><p class="src"><a id="v:decrypt" class="def">decrypt</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; GetObject -&gt; m GetObjectResponse <a href="src/Network.AWS.S3.Encryption.html#decrypt" class="link">Source</a> <a href="#v:decrypt" class="selflink">#</a></p><div class="doc"><p>Retrieve an object, parsing the envelope from any <code>x-amz-meta-*</code> headers
 and decrypting the response body.</p><p>Throws <code><a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></code>, <code>Error</code>.</p></div></div><div class="top"><p class="src"><a id="v:initiate" class="def">initiate</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; CreateMultipartUpload -&gt; m (CreateMultipartUploadResponse, UploadPart -&gt; <a href="Network-AWS-S3-Encryption-Encrypt.html#t:Encrypted">Encrypted</a> UploadPart) <a href="src/Network.AWS.S3.Encryption.html#initiate" class="link">Source</a> <a href="#v:initiate" class="selflink">#</a></p><div class="doc"><p>Initiate an encrypted multipart upload, storing the encryption envelope
 in the <code>x-amz-meta-*</code> headers.</p><p>The returned <code>UploadPart</code> <code>-&gt;</code> <code><a href="Network-AWS-S3-Encryption-Encrypt.html#t:Encrypted">Encrypted</a></code> <code>UploadPart</code> function is used to encrypt
 each part of the object. The same caveats for multipart upload apply, it is
 assumed that each part is uploaded in order and each part needs to be
 individually encrypted.</p><p>For example:</p><pre>(a', f) &lt;- initiate (a :: CreateMultipartUpload)
b'      &lt;- send (f b :: Encrypted UploadPart)
</pre><p>Throws <code><a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></code>, <code>Error</code>.</p></div></div><h2 id="g:4">Instruction Files</h2><div class="doc"><p>An alternative method of storing the encryption envelope in an adjacent S3
object is provided for the case when metadata headers are reserved for other
data. This method removes the metadata overhead at the expense of an additional
HTTP request to perform encryption/decryption.
The provided <code>*Instruction</code> functions make the convenient assumption that
the <code><a href="Network-AWS-S3-Encryption.html#v:defaultExtension">defaultExtension</a></code> is desired. If you wish to override the suffix/extension,
you can simply call the underlying plumbing to modify the
<code><a href="Network-AWS-S3-Encryption-Instructions.html#t:PutInstructions">PutInstructions</a></code> or <code><a href="Network-AWS-S3-Encryption-Instructions.html#t:GetInstructions">GetInstructions</a></code> suffix before sending.</p><p>An example of encryption with a non-default instruction extension:</p><pre>(a, b) &lt;- <code><a href="Network-AWS-S3-Encryption-Encrypt.html#v:encrypted">encrypted</a></code> (x :: <code>PutObject</code>)
_      &lt;- <code>send</code> (b &amp; <code><a href="Network-AWS-S3-Encryption-Instructions.html#v:piExtension">piExtension</a></code> .~ &quot;.envelope&quot;) -- Store the custom instruction file.
<code>send</code> a -- Store the actual encrypted object.
</pre></div><div class="top"><p class="src"><a id="v:encryptInstructions" class="def">encryptInstructions</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; PutObject -&gt; m PutObjectResponse <a href="src/Network.AWS.S3.Encryption.html#encryptInstructions" class="link">Source</a> <a href="#v:encryptInstructions" class="selflink">#</a></p><div class="doc"><p>Encrypt an object, storing the encryption envelope in an adjacent instruction
 file with the same <code>ObjectKey</code> and <code><a href="Network-AWS-S3-Encryption.html#v:defaultExtension">defaultExtension</a></code>.
 This makes two HTTP requests, storing the instruction file first and upon success,
 storing the actual object.</p><p>Throws <code><a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></code>, <code>Error</code>.</p></div></div><div class="top"><p class="src"><a id="v:decryptInstructions" class="def">decryptInstructions</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; GetObject -&gt; m GetObjectResponse <a href="src/Network.AWS.S3.Encryption.html#decryptInstructions" class="link">Source</a> <a href="#v:decryptInstructions" class="selflink">#</a></p><div class="doc"><p>Retrieve an object and its adjacent instruction file. The instruction
 are retrieved and parsed first.
 Performs two HTTP requests.</p><p>Throws <code><a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></code>, <code>Error</code>.</p></div></div><div class="top"><p class="src"><a id="v:initiateInstructions" class="def">initiateInstructions</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Types.html#t:HasKeyEnv">HasKeyEnv</a> r) =&gt; CreateMultipartUpload -&gt; m (CreateMultipartUploadResponse, UploadPart -&gt; <a href="Network-AWS-S3-Encryption-Encrypt.html#t:Encrypted">Encrypted</a> UploadPart) <a href="src/Network.AWS.S3.Encryption.html#initiateInstructions" class="link">Source</a> <a href="#v:initiateInstructions" class="selflink">#</a></p><div class="doc"><p>Initiate an encrypted multipart upload, storing the encryption envelope
 in an adjacent instruction file with the same <code>ObjectKey</code> and <code><a href="Network-AWS-S3-Encryption.html#v:defaultExtension">defaultExtension</a></code>.</p><p>The returned <code>UploadPart</code> <code>-&gt;</code> <code><a href="Network-AWS-S3-Encryption-Encrypt.html#t:Encrypted">Encrypted</a></code> <code>UploadPart</code> function is used to encrypt
 each part of the object. The same caveats for multipart upload apply, it is
 assumed that each part is uploaded in order and each part needs to be
 individually encrypted.</p><p>Throws <code><a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></code>, <code>Error</code>.</p></div></div><div class="top"><p class="src"><a id="v:cleanupInstructions" class="def">cleanupInstructions</a> :: (AWSConstraint r m, <a href="Network-AWS-S3-Encryption-Instructions.html#t:RemoveInstructions">RemoveInstructions</a> a) =&gt; a -&gt; m (Rs a) <a href="src/Network.AWS.S3.Encryption.html#cleanupInstructions" class="link">Source</a> <a href="#v:cleanupInstructions" class="selflink">#</a></p><div class="doc"><p>Given a request to execute, such as <code>AbortMultipartUpload</code> or <code>DeleteObject</code>,
 remove the adjacent instruction file, if it exists with the <code><a href="Network-AWS-S3-Encryption.html#v:defaultExtension">defaultExtension</a></code>.
 Performs two HTTP requests.</p><p>Throws <code><a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></code>, <code>Error</code>.</p></div></div><h3 id="g:5">Default Instruction Extension</h3><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Ext" class="def">Ext</a> <a href="src/Network.AWS.S3.Encryption.Types.html#Ext" class="link">Source</a> <a href="#t:Ext" class="selflink">#</a></p><div class="doc"><p>An instructions file extension.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Ext" class="def">Ext</a> Text</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Ext" class="caption collapser" onclick="toggleSection('i:Ext')">Instances</p><div id="section.i:Ext" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Ext:Eq:1" class="instance expander" onclick="toggleSection('i:id:Ext:Eq:1')"></span> <a href="../base-4.10.0.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-87" class="link">Source</a> <a href="#t:Ext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Ext:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a> -&gt; <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a> -&gt; <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Ext:Show:2" class="instance expander" onclick="toggleSection('i:id:Ext:Show:2')"></span> <a href="../base-4.10.0.0/Text-Show.html#t:Show">Show</a> <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-87" class="link">Source</a> <a href="#t:Ext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Ext:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a> -&gt; <a href="../base-4.10.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a>] -&gt; <a href="../base-4.10.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Ext:IsString:3" class="instance expander" onclick="toggleSection('i:id:Ext:IsString:3')"></span> <a href="../base-4.10.0.0/Data-String.html#t:IsString">IsString</a> <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-87" class="link">Source</a> <a href="#t:Ext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Ext:IsString:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromString">fromString</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a> <a href="#v:fromString" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:defaultExtension" class="def">defaultExtension</a> :: <a href="Network-AWS-S3-Encryption.html#t:Ext">Ext</a> <a href="src/Network.AWS.S3.Encryption.Types.html#defaultExtension" class="link">Source</a> <a href="#v:defaultExtension" class="selflink">#</a></p><div class="doc"><p>Defaults to <code>.instruction</code></p></div></div><h1 id="g:6">Handling Errors</h1><div class="doc"><p>Errors are thrown by the library using <code>MonadThrow</code> and will consist of one of
the branches from <code><a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></code> for anything crypto related, or a disparate
<code>Error</code> anything related to the underlying <code>AWS</code> service calls.</p><p>You can catch errors and sub-errors via <code>trying</code> etc. from <a href="Control-Exception-Lens.html">Control.Exception.Lens</a>,
and the appropriate <code><a href="Network-AWS-S3-Encryption.html#t:AsEncryptionError">AsEncryptionError</a></code> <code>Prism</code>:</p><pre>trying <code><a href="Network-AWS-S3-Encryption.html#v:_EncryptionError">_EncryptionError</a></code> (encrypt (putObject &quot;bkt&quot; &quot;key&quot;)) :: Either <code><a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></code> PutObjectResponse
</pre></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:EncryptionError" class="def">EncryptionError</a> <a href="src/Network.AWS.S3.Encryption.Types.html#EncryptionError" class="link">Source</a> <a href="#t:EncryptionError" class="selflink">#</a></p><div class="doc"><p>An error thrown when performing encryption or decryption.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CipherFailure" class="def">CipherFailure</a> CryptoError</td><td class="doc"><p>Error initialising an AES cipher from a secret key.</p></td></tr><tr><td class="src"><a id="v:PubKeyFailure" class="def">PubKeyFailure</a> Error</td><td class="doc"><p>Failure performing asymmetric encryption/decryption.</p></td></tr><tr><td class="src"><a id="v:IVInvalid" class="def">IVInvalid</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>Failure creating an IV from some bytes.</p></td></tr><tr><td class="src"><a id="v:EnvelopeMissing" class="def">EnvelopeMissing</a> (CI Text)</td><td class="doc"><p>Required envelope field missing.</p></td></tr><tr><td class="src"><a id="v:EnvelopeInvalid" class="def">EnvelopeInvalid</a> (CI Text) <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Error parsing envelope.</p></td></tr><tr><td class="src"><a id="v:PlaintextUnavailable" class="def">PlaintextUnavailable</a></td><td class="doc"><p>KMS error when retrieving decrypted plaintext.</p></td></tr></table></div><div class="subs instances"><p id="control.i:EncryptionError" class="caption collapser" onclick="toggleSection('i:EncryptionError')">Instances</p><div id="section.i:EncryptionError" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:EncryptionError:Eq:1" class="instance expander" onclick="toggleSection('i:id:EncryptionError:Eq:1')"></span> <a href="../base-4.10.0.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-51" class="link">Source</a> <a href="#t:EncryptionError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:EncryptionError:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> -&gt; <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> -&gt; <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:EncryptionError:Show:2" class="instance expander" onclick="toggleSection('i:id:EncryptionError:Show:2')"></span> <a href="../base-4.10.0.0/Text-Show.html#t:Show">Show</a> <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-51" class="link">Source</a> <a href="#t:EncryptionError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:EncryptionError:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> -&gt; <a href="../base-4.10.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a>] -&gt; <a href="../base-4.10.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:EncryptionError:Exception:3" class="instance expander" onclick="toggleSection('i:id:EncryptionError:Exception:3')"></span> <a href="../base-4.10.0.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-53" class="link">Source</a> <a href="#t:EncryptionError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:EncryptionError:Exception:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> -&gt; <a href="../base-4.10.0.0/Control-Exception-Base.html#t:SomeException">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.10.0.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:EncryptionError:AsEncryptionError:4" class="instance expander" onclick="toggleSection('i:id:EncryptionError:AsEncryptionError:4')"></span> <a href="Network-AWS-S3-Encryption.html#t:AsEncryptionError">AsEncryptionError</a> <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-55" class="link">Source</a> <a href="#t:EncryptionError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:EncryptionError:AsEncryptionError:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:_EncryptionError">_EncryptionError</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> <a href="src/Network.AWS.S3.Encryption.Types.html#_EncryptionError" class="link">Source</a> <a href="#v:_EncryptionError" class="selflink">#</a></p><p class="src"><a href="#v:_CipherFailure">_CipherFailure</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> CryptoError <a href="src/Network.AWS.S3.Encryption.Types.html#_CipherFailure" class="link">Source</a> <a href="#v:_CipherFailure" class="selflink">#</a></p><p class="src"><a href="#v:_PubKeyFailure">_PubKeyFailure</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> Error <a href="src/Network.AWS.S3.Encryption.Types.html#_PubKeyFailure" class="link">Source</a> <a href="#v:_PubKeyFailure" class="selflink">#</a></p><p class="src"><a href="#v:_IVInvalid">_IVInvalid</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.AWS.S3.Encryption.Types.html#_IVInvalid" class="link">Source</a> <a href="#v:_IVInvalid" class="selflink">#</a></p><p class="src"><a href="#v:_EnvelopeMissing">_EnvelopeMissing</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> (CI Text) <a href="src/Network.AWS.S3.Encryption.Types.html#_EnvelopeMissing" class="link">Source</a> <a href="#v:_EnvelopeMissing" class="selflink">#</a></p><p class="src"><a href="#v:_EnvelopeInvalid">_EnvelopeInvalid</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> (CI Text, <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>) <a href="src/Network.AWS.S3.Encryption.Types.html#_EnvelopeInvalid" class="link">Source</a> <a href="#v:_EnvelopeInvalid" class="selflink">#</a></p><p class="src"><a href="#v:_PlaintextUnavailable">_PlaintextUnavailable</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> () <a href="src/Network.AWS.S3.Encryption.Types.html#_PlaintextUnavailable" class="link">Source</a> <a href="#v:_PlaintextUnavailable" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:AsEncryptionError" class="def">AsEncryptionError</a> r <span class="keyword">where</span> <a href="src/Network.AWS.S3.Encryption.Types.html#AsEncryptionError" class="link">Source</a> <a href="#t:AsEncryptionError" class="selflink">#</a></p><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Network-AWS-S3-Encryption.html#v:_EncryptionError">_EncryptionError</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:_EncryptionError" class="def">_EncryptionError</a> :: Prism' r <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> <a href="src/Network.AWS.S3.Encryption.Types.html#_EncryptionError" class="link">Source</a> <a href="#v:_EncryptionError" class="selflink">#</a></p><p class="src"><a id="v:_CipherFailure" class="def">_CipherFailure</a> :: Prism' r CryptoError <a href="src/Network.AWS.S3.Encryption.Types.html#_CipherFailure" class="link">Source</a> <a href="#v:_CipherFailure" class="selflink">#</a></p><p class="src"><a id="v:_PubKeyFailure" class="def">_PubKeyFailure</a> :: Prism' r Error <a href="src/Network.AWS.S3.Encryption.Types.html#_PubKeyFailure" class="link">Source</a> <a href="#v:_PubKeyFailure" class="selflink">#</a></p><p class="src"><a id="v:_IVInvalid" class="def">_IVInvalid</a> :: Prism' r <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.AWS.S3.Encryption.Types.html#_IVInvalid" class="link">Source</a> <a href="#v:_IVInvalid" class="selflink">#</a></p><p class="src"><a id="v:_EnvelopeMissing" class="def">_EnvelopeMissing</a> :: Prism' r (CI Text) <a href="src/Network.AWS.S3.Encryption.Types.html#_EnvelopeMissing" class="link">Source</a> <a href="#v:_EnvelopeMissing" class="selflink">#</a></p><p class="src"><a id="v:_EnvelopeInvalid" class="def">_EnvelopeInvalid</a> :: Prism' r (CI Text, <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>) <a href="src/Network.AWS.S3.Encryption.Types.html#_EnvelopeInvalid" class="link">Source</a> <a href="#v:_EnvelopeInvalid" class="selflink">#</a></p><p class="src"><a id="v:_PlaintextUnavailable" class="def">_PlaintextUnavailable</a> :: Prism' r () <a href="src/Network.AWS.S3.Encryption.Types.html#_PlaintextUnavailable" class="link">Source</a> <a href="#v:_PlaintextUnavailable" class="selflink">#</a></p></div><div class="subs instances"><p id="control.i:AsEncryptionError" class="caption collapser" onclick="toggleSection('i:AsEncryptionError')">Instances</p><div id="section.i:AsEncryptionError" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:AsEncryptionError:AsEncryptionError:1" class="instance expander" onclick="toggleSection('i:ic:AsEncryptionError:AsEncryptionError:1')"></span> <a href="Network-AWS-S3-Encryption.html#t:AsEncryptionError">AsEncryptionError</a> <a href="../base-4.10.0.0/Control-Exception-Base.html#t:SomeException">SomeException</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-57" class="link">Source</a> <a href="#t:AsEncryptionError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:AsEncryptionError:AsEncryptionError:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:_EncryptionError">_EncryptionError</a> :: Prism' <a href="../base-4.10.0.0/Control-Exception-Base.html#t:SomeException">SomeException</a> <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> <a href="src/Network.AWS.S3.Encryption.Types.html#_EncryptionError" class="link">Source</a> <a href="#v:_EncryptionError" class="selflink">#</a></p><p class="src"><a href="#v:_CipherFailure">_CipherFailure</a> :: Prism' <a href="../base-4.10.0.0/Control-Exception-Base.html#t:SomeException">SomeException</a> CryptoError <a href="src/Network.AWS.S3.Encryption.Types.html#_CipherFailure" class="link">Source</a> <a href="#v:_CipherFailure" class="selflink">#</a></p><p class="src"><a href="#v:_PubKeyFailure">_PubKeyFailure</a> :: Prism' <a href="../base-4.10.0.0/Control-Exception-Base.html#t:SomeException">SomeException</a> Error <a href="src/Network.AWS.S3.Encryption.Types.html#_PubKeyFailure" class="link">Source</a> <a href="#v:_PubKeyFailure" class="selflink">#</a></p><p class="src"><a href="#v:_IVInvalid">_IVInvalid</a> :: Prism' <a href="../base-4.10.0.0/Control-Exception-Base.html#t:SomeException">SomeException</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.AWS.S3.Encryption.Types.html#_IVInvalid" class="link">Source</a> <a href="#v:_IVInvalid" class="selflink">#</a></p><p class="src"><a href="#v:_EnvelopeMissing">_EnvelopeMissing</a> :: Prism' <a href="../base-4.10.0.0/Control-Exception-Base.html#t:SomeException">SomeException</a> (CI Text) <a href="src/Network.AWS.S3.Encryption.Types.html#_EnvelopeMissing" class="link">Source</a> <a href="#v:_EnvelopeMissing" class="selflink">#</a></p><p class="src"><a href="#v:_EnvelopeInvalid">_EnvelopeInvalid</a> :: Prism' <a href="../base-4.10.0.0/Control-Exception-Base.html#t:SomeException">SomeException</a> (CI Text, <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>) <a href="src/Network.AWS.S3.Encryption.Types.html#_EnvelopeInvalid" class="link">Source</a> <a href="#v:_EnvelopeInvalid" class="selflink">#</a></p><p class="src"><a href="#v:_PlaintextUnavailable">_PlaintextUnavailable</a> :: Prism' <a href="../base-4.10.0.0/Control-Exception-Base.html#t:SomeException">SomeException</a> () <a href="src/Network.AWS.S3.Encryption.Types.html#_PlaintextUnavailable" class="link">Source</a> <a href="#v:_PlaintextUnavailable" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:AsEncryptionError:AsEncryptionError:2" class="instance expander" onclick="toggleSection('i:ic:AsEncryptionError:AsEncryptionError:2')"></span> <a href="Network-AWS-S3-Encryption.html#t:AsEncryptionError">AsEncryptionError</a> <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a></span> <a href="src/Network.AWS.S3.Encryption.Types.html#line-55" class="link">Source</a> <a href="#t:AsEncryptionError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:AsEncryptionError:AsEncryptionError:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:_EncryptionError">_EncryptionError</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> <a href="src/Network.AWS.S3.Encryption.Types.html#_EncryptionError" class="link">Source</a> <a href="#v:_EncryptionError" class="selflink">#</a></p><p class="src"><a href="#v:_CipherFailure">_CipherFailure</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> CryptoError <a href="src/Network.AWS.S3.Encryption.Types.html#_CipherFailure" class="link">Source</a> <a href="#v:_CipherFailure" class="selflink">#</a></p><p class="src"><a href="#v:_PubKeyFailure">_PubKeyFailure</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> Error <a href="src/Network.AWS.S3.Encryption.Types.html#_PubKeyFailure" class="link">Source</a> <a href="#v:_PubKeyFailure" class="selflink">#</a></p><p class="src"><a href="#v:_IVInvalid">_IVInvalid</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.AWS.S3.Encryption.Types.html#_IVInvalid" class="link">Source</a> <a href="#v:_IVInvalid" class="selflink">#</a></p><p class="src"><a href="#v:_EnvelopeMissing">_EnvelopeMissing</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> (CI Text) <a href="src/Network.AWS.S3.Encryption.Types.html#_EnvelopeMissing" class="link">Source</a> <a href="#v:_EnvelopeMissing" class="selflink">#</a></p><p class="src"><a href="#v:_EnvelopeInvalid">_EnvelopeInvalid</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> (CI Text, <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>) <a href="src/Network.AWS.S3.Encryption.Types.html#_EnvelopeInvalid" class="link">Source</a> <a href="#v:_EnvelopeInvalid" class="selflink">#</a></p><p class="src"><a href="#v:_PlaintextUnavailable">_PlaintextUnavailable</a> :: Prism' <a href="Network-AWS-S3-Encryption.html#t:EncryptionError">EncryptionError</a> () <a href="src/Network.AWS.S3.Encryption.Types.html#_PlaintextUnavailable" class="link">Source</a> <a href="#v:_PlaintextUnavailable" class="selflink">#</a></p></div></div></td></tr></table></div></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>